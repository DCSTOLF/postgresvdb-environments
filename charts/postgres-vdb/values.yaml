global:
  # Source database configuration
  sourceDatabase: "10.0.1.54:largedb"
  postgresImage: "postgres:16.9"
  
  # Default resource limits
  defaultResources:
    requests:
      memory: "2Gi"
      cpu: "2"
    limits:
      memory: "4Gi"
      cpu: "2"

# VDB configuration
vdb:
  enabled: true
  port: 5432
  mountPath: "/mnt/postgres"
  ownershipSpec: "999:999"
  mode: "Primary"
  errorBackoffPeriod: "5m"
  
  # Database credentials (override per environment)
  database:
    name: "postgres"
    user: "postgres"
    password: "changeme123"
  
  # Resource configuration
  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "1"
  
  # Lifecycle hooks
  hooks: []
  
  # PostgreSQL configuration
  postgresConfig:
    - name: "listen_addresses"
      value: "*"
    - name: "max_connections"
      value: "20"
    - name: "shared_buffers"
      value: "1GB"
    - name: "work_mem"
      value: "10MB"
    - name: "maintenance_work_mem"
      value: "256MB"
    - name: "dynamic_shared_memory_type"
      value: "posix"
    - name: "bgwriter_delay"
      value: "500ms"
    - name: "bgwriter_lru_maxpages"
      value: "200"
    - name: "bgwriter_lru_multiplier"
      value: "2.0"
    - name: "bgwriter_flush_after"
      value: "512kB"
    - name: "max_worker_processes"
      value: "4"
    - name: "max_parallel_workers_per_gather"
      value: "1"
    - name: "max_parallel_maintenance_workers"
      value: "1"
    - name: "max_parallel_workers"
      value: "2"
    - name: "wal_level"
      value: "replica"
    - name: "wal_sync_method"
      value: "open_datasync"
    - name: "full_page_writes"
      value: "on"
    - name: "wal_compression"
      value: "lz4"
    - name: "wal_buffers"
      value: "16MB"
    - name: "wal_writer_delay"
      value: "2ms"
    - name: "wal_writer_flush_after"
      value: "512kB"
    - name: "commit_siblings"
      value: "5"
    - name: "checkpoint_timeout"
      value: "30min"
    - name: "checkpoint_completion_target"
      value: "0.7"
    - name: "max_wal_size"
      value: "2GB"
    - name: "min_wal_size"
      value: "512MB"
    - name: "max_wal_senders"
      value: "0"
    - name: "log_min_duration_statement"
      value: "5000"
    - name: "log_checkpoints"
      value: "on"
    - name: "autovacuum"
      value: "on"
    - name: "autovacuum_vacuum_scale_factor"
      value: "0.1"
    - name: "autovacuum_analyze_scale_factor"
      value: "0.05"
    - name: "autovacuum_vacuum_cost_delay"
      value: "10ms"
    - name: "autovacuum_vacuum_cost_limit"
      value: "1000"
    - name: "max_locks_per_transaction"
      value: "128"
    - name: "effective_cache_size"
      value: "2GB"
    - name: "temp_buffers"
      value: "8MB"

# Operator configuration
operator:
  enabled: true
  image:
    repository: "delphix/postgres-vdb-operator"
    tag: "latest"
    pullPolicy: "IfNotPresent"
  
# Monitoring configuration
monitoring:
  enabled: false
  serviceMonitor:
    enabled: false
    interval: "30s"
    scrapeTimeout: "10s"

# Service configuration
service:
  type: ClusterIP
  port: 5432
  annotations: {}

# Security context
securityContext:
  runAsUser: 999
  runAsGroup: 999
  fsGroup: 999

# Pod annotations
podAnnotations: {}

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Sync wave for ArgoCD
syncWave: "0"

# Environment label (override per environment)
environment: "development"
